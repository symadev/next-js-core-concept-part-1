import { NextResponse } from 'next/server'

 
// This function can be marked `async` if using `await` inside

export function middleware(request) {
const dummyUserData = {
    role:"user",
    email:"test@admin.com"
}
    let CurrentCookie = request.cookies.get('nextjs-cookies')
    console.log(CurrentCookie);

    let isServicesPage = request.nextUrl.pathname.startsWith("/services") 
    let isAdmin = dummyUserData.role == "admin"
    if(isServicesPage && !isAdmin)
        return NextResponse.redirect(new URL('/login', request.url))
 
  return NextResponse.next()

}
 

// // This function can be marked `async` if using `await` inside
// export function middleware(request) {
//     return NextResponse.next()
    
//   }
//    -----> mane bujhay holo client jokhon request pathay tokhon server nutral vabe check na korei server a data take pathay dei






// middleware() ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡ßá‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶ï‡ßÄ?
// ‡¶è‡¶á ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ü‡¶ø ‡¶π‡¶ö‡ßç‡¶õ‡ßá Next.js-‡¶è‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø Middleware ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®, ‡¶Ø‡ßá‡¶ü‡¶æ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶Ø‡¶ñ‡¶® ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßá‡¶ú‡ßá ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶Ü‡¶∏‡ßá, ‡¶§‡¶ñ‡¶® ‡¶∏‡ßá‡¶ü‡¶æ ‡¶Ü‡¶ó‡ßá ‡¶è‡¶á ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡ßá‡¶∞ ‡¶≠‡¶ø‡¶§‡¶∞ ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡ßü‡•§

// üí° ‡¶ï‡ßã‡¶° ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£:

// export function middleware(request) {
// ‚û°Ô∏è ‡¶è‡¶á ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ü‡¶ø ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá, ‡¶Ø‡¶æ‡¶§‡ßá Next.js ‡¶è‡¶ü‡¶æ‡¶ï‡ßá middleware ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶ö‡¶ø‡¶®‡ßá‡•§


// const dummyUserData = {
//     role: "user",
//     email: "test@admin.com"
// }
// ‚û°Ô∏è ‡¶è‡¶ü‡¶æ ‡¶è‡¶ï‡¶ü‡¶æ ‡¶°‡¶æ‡¶Æ‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‚Äî ‡¶ß‡¶∞‡ßá ‡¶®‡¶ø‡¶ö‡ßç‡¶õ‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶è‡¶ï‡¶ú‡¶® ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ "user", ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶®‡¶æ‡•§


// let CurrentCookie = request.cookies.get('nextjs-cookies')
// console.log(CurrentCookie);
// ‚û°Ô∏è ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ï‡ßÅ‡¶ï‡¶ø ‡¶•‡ßá‡¶ï‡ßá 'nextjs-cookies' ‡¶®‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶ï‡ßÅ‡¶ï‡¶ø ‡¶∞‡¶ø‡¶° ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§ ‡¶è‡¶ü‡¶ø ‡¶ß‡¶∞‡ßá ‡¶®‡¶ø‡¶ö‡ßç‡¶õ‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶≤‡¶ó‡¶á‡¶® ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶¨‡¶æ ‡¶∏‡ßá‡¶∂‡¶® ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡ßá‡•§


// let isServicesPage = request.nextUrl.pathname.startsWith("/services") 
// ‚û°Ô∏è ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‚Äî ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡¶ø /services ‡¶¶‡¶ø‡ßü‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶ì‡ßü‡¶æ ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶ö‡¶æ‡¶ö‡ßç‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ‡•§


// let isAdmin = dummyUserData.role == "admin"
// ‚û°Ô∏è ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶õ‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶ï‡¶ø‡¶®‡¶æ‡•§ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ø‡ßá‡¶π‡ßá‡¶§‡ßÅ role: "user" ‡¶¶‡ßá‡¶ì‡ßü‡¶æ, ‡¶§‡¶æ‡¶á isAdmin = false ‡¶π‡¶¨‡ßá‡•§

// if (isServicesPage && !isAdmin)
//     return NextResponse.redirect(new URL('/login', request.url))
// ‚û°Ô∏è ‡¶Ø‡¶¶‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ /services ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶ö‡¶æ‡ßü ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶®‡¶æ ‡¶π‡ßü, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶§‡¶æ‡¶ï‡ßá /login ‡¶™‡ßá‡¶ú‡ßá ‡¶∞‡¶ø‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶¨‡ßá‡•§


// return NextResponse.next()
// ‚û°Ô∏è ‡¶Ø‡¶¶‡¶ø ‡¶ï‡ßã‡¶®‡ßã ‡¶∞‡¶ø‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡¶∂‡¶® ‡¶®‡¶æ ‡¶≤‡¶æ‡¶ó‡ßá, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã‡¶á ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶Ü‡¶ó‡¶æ‡¶¨‡ßá ‚Äî ‡¶Ö‡¶∞‡ßç‡¶•‡¶æ‡ßé ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶§‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶ô‡ßç‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶™‡ßá‡¶ú‡ßá‡¶á ‡¶Ø‡ßá‡¶§‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶¨‡ßá‡•§

// ‚úÖ ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡ßá‡¶™‡ßá:

// ‡¶¨‡¶ø‡¶∑‡ßü	‡¶Æ‡¶æ‡¶®‡ßá
// middleware	‡¶è‡¶ï‡¶ü‡¶æ ‡¶ö‡ßá‡¶ï‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü, ‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡ßã‡¶•‡¶æ‡ßü ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßá ‡¶∏‡ßá
// /services ‡¶™‡ßá‡¶ú	‡¶è‡¶á ‡¶™‡ßá‡¶ú ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
// ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞	/services ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶ö‡¶æ‡¶á‡¶≤‡ßá‡¶á ‡¶§‡¶æ‡¶ï‡ßá /login ‡¶™‡ßá‡¶ú‡ßá ‡¶™‡¶æ‡¶†‡¶ø‡ßü‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü
// üîê ‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡¶§‡ßá ‡¶ï‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßã?
// dummyUserData ‡¶è‡¶∞ ‡¶¨‡¶¶‡¶≤‡ßá ‡¶∏‡¶†‡¶ø‡¶ï ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ (‡¶Ø‡ßá‡¶Æ‡¶® JWT ‡¶¨‡¶æ Session Cookie) ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßã‡•§

// Middleware ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶∞‡ßã‡¶≤-‡¶¨‡ßá‡¶ú‡¶° ‡¶∞‡¶æ‡¶â‡¶ü ‡¶™‡ßç‡¶∞‡ßã‡¶ü‡ßá‡¶ï‡¶∂‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡•§
